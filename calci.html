<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Modern Calculator</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .calculator-container {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    h2 {
      text-align: center;
      color: white;
      margin-bottom: 20px;
      font-weight: 300;
      font-size: 1.5rem;
    }

    #calculator {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 15px;
      padding: 20px;
      width: 280px;
      box-shadow: inset 0 4px 10px rgba(0, 0, 0, 0.3);
    }

    #display {
      width: 100%;
      height: 60px;
      background: rgba(0, 0, 0, 0.5);
      border: none;
      border-radius: 10px;
      color: white;
      font-size: 1.8rem;
      text-align: right;
      padding: 0 15px;
      margin-bottom: 15px;
      outline: none;
      font-family: 'Courier New', monospace;
      box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.5);
    }

    .button-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }

    button {
      width: 100%;
      height: 50px;
      border: none;
      border-radius: 10px;
      font-size: 1.2rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      outline: none;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .number-btn {
      background: linear-gradient(145deg, #f0f0f0, #d1d1d1);
      color: #333;
    }

    .number-btn:hover {
      background: linear-gradient(145deg, #e0e0e0, #c1c1c1);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }

    .operator-btn {
      background: linear-gradient(145deg, #ff6b6b, #ee5a52);
      color: white;
    }

    .operator-btn:hover {
      background: linear-gradient(145deg, #ff5252, #e53e3e);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(255, 107, 107, 0.4);
    }

    .equals-btn {
      background: linear-gradient(145deg, #4ecdc4, #44a08d);
      color: white;
    }

    .equals-btn:hover {
      background: linear-gradient(145deg, #26d0ce, #1a9850);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(78, 205, 196, 0.4);
    }

    .clear-btn {
      background: linear-gradient(145deg, #ffa726, #ff9800);
      color: white;
    }

    .clear-btn:hover {
      background: linear-gradient(145deg, #ff9800, #f57c00);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(255, 167, 38, 0.4);
    }

    button:active {
      transform: translateY(0);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .decimal-btn {
      background: linear-gradient(145deg, #f0f0f0, #d1d1d1);
      color: #333;
    }

    .decimal-btn:hover {
      background: linear-gradient(145deg, #e0e0e0, #c1c1c1);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }

    @media (max-width: 400px) {
      .calculator-container {
        padding: 20px;
      }
      
      #calculator {
        width: 100%;
        max-width: 280px;
      }
    }
  </style>
</head>
<body>
  <div class="calculator-container">
    <h2>Calculator v2.0</h2>
    <div id="calculator">
      <input type="text" id="display" readonly placeholder="0">
      
      <div class="button-grid">
        <button class="clear-btn" onclick="clearAll()">AC</button>
        <button class="clear-btn" onclick="clearEntry()">CE</button>
        <button class="operator-btn" onclick="deleteLast()">⌫</button>
        <button class="operator-btn" onclick="setOperation('/')">/</button>
        
        <button class="number-btn" onclick="appendNumber('7')">7</button>
        <button class="number-btn" onclick="appendNumber('8')">8</button>
        <button class="number-btn" onclick="appendNumber('9')">9</button>
        <button class="operator-btn" onclick="setOperation('*')">×</button>
        
        <button class="number-btn" onclick="appendNumber('4')">4</button>
        <button class="number-btn" onclick="appendNumber('5')">5</button>
        <button class="number-btn" onclick="appendNumber('6')">6</button>
        <button class="operator-btn" onclick="setOperation('-')">-</button>
        
        <button class="number-btn" onclick="appendNumber('1')">1</button>
        <button class="number-btn" onclick="appendNumber('2')">2</button>
        <button class="number-btn" onclick="appendNumber('3')">3</button>
        <button class="operator-btn" onclick="setOperation('+')">+</button>
        
        <button class="number-btn" onclick="toggleSign()">±</button>
        <button class="number-btn" onclick="appendNumber('0')">0</button>
        <button class="decimal-btn" onclick="appendDecimal()">.</button>
        <button class="equals-btn" onclick="calculate()">=</button>
      </div>
    </div>
  </div>

  <script>
    let currentInput = "0";
    let previousInput = "";
    let operator = "";
    let waitingForOperand = false;

    function updateDisplay() {
      const display = document.getElementById("display");
      display.value = currentInput;
    }

    function appendNumber(num) {
      if (waitingForOperand) {
        currentInput = num;
        waitingForOperand = false;
      } else {
        currentInput = currentInput === "0" ? num : currentInput + num;
      }
      updateDisplay();
    }

    function appendDecimal() {
      if (waitingForOperand) {
        currentInput = "0.";
        waitingForOperand = false;
      } else if (currentInput.indexOf(".") === -1) {
        currentInput += ".";
      }
      updateDisplay();
    }

    function clearAll() {
      currentInput = "0";
      previousInput = "";
      operator = "";
      waitingForOperand = false;
      updateDisplay();
    }

    function clearEntry() {
      currentInput = "0";
      updateDisplay();
    }

    function deleteLast() {
      if (currentInput.length > 1) {
        currentInput = currentInput.slice(0, -1);
      } else {
        currentInput = "0";
      }
      updateDisplay();
    }

    function toggleSign() {
      if (currentInput !== "0") {
        if (currentInput.charAt(0) === "-") {
          currentInput = currentInput.slice(1);
        } else {
          currentInput = "-" + currentInput;
        }
        updateDisplay();
      }
    }

    function setOperation(nextOperator) {
      const inputValue = parseFloat(currentInput);

      if (previousInput === "") {
        previousInput = inputValue;
      } else if (operator) {
        const currentValue = previousInput || 0;
        const newValue = performCalculation(currentValue, inputValue, operator);

        currentInput = String(newValue);
        previousInput = newValue;
        updateDisplay();
      }

      waitingForOperand = true;
      operator = nextOperator;
    }

    function performCalculation(firstOperand, secondOperand, operator) {
      switch (operator) {
        case "+":
          return firstOperand + secondOperand;
        case "-":
          return firstOperand - secondOperand;
        case "*":
          return firstOperand * secondOperand;
        case "/":
          if (secondOperand === 0) {
            return "Error";
          }
          return firstOperand / secondOperand;
        default:
          return secondOperand;
      }
    }

    function calculate() {
      const inputValue = parseFloat(currentInput);

      if (previousInput !== "" && operator && !waitingForOperand) {
        const newValue = performCalculation(previousInput, inputValue, operator);
        
        currentInput = String(newValue);
        previousInput = "";
        operator = "";
        waitingForOperand = true;
        updateDisplay();
      }
    }

    // Handle keyboard input
    document.addEventListener('keydown', function(event) {
      const key = event.key;
      
      if (key >= '0' && key <= '9') {
        appendNumber(key);
      } else if (key === '.') {
        appendDecimal();
      } else if (key === '+' || key === '-' || key === '*' || key === '/') {
        setOperation(key);
      } else if (key === 'Enter' || key === '=') {
        event.preventDefault();
        calculate();
      } else if (key === 'Escape') {
        clearAll();
      } else if (key === 'Backspace') {
        deleteLast();
      }
    });

    // Initialize display
    updateDisplay();
  </script>
</body>
</html>